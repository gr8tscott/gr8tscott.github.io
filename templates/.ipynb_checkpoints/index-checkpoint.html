<!doctype html>
<html lang="en">
<head>
    <title>Stock Sentiment App v1.0</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<center>
<script type="text/javascript">
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
  
  $(document).ready(function() {
    // Fetch and display stock data
    $.getJSON($SCRIPT_ROOT + '/stock_data', function(data) {
      let tableHtml = '<table border="1"><tr><th>Ticker</th><th>Current Price</th><th>Traded Price</th><th>AI Response</th><th>Date</th><th>Correct Prediction</th></tr>';
      
      data.forEach(row => {
        let correctPrediction = row.correct_prediction ? 
          '<span style="color: green;">True</span>' : 
          '<span style="color: red;">False</span>';
        
        tableHtml += `<tr>
          <td>${row.ticker}</td>
          <td>${row.current_price}</td>
          <td>${row.traded_price}</td>
          <td>${row.ai_response}</td>
          <td>${row.date}</td>
          <td>${correctPrediction}</td>
        </tr>`;
      });
      
      tableHtml += '</table>';
      
      // Insert table HTML into the page
      $('#stock-table').html(tableHtml);
    });
    
    $('#download').bind('click', function() {
      $.getJSON($SCRIPT_ROOT + '/generate', {
        prefix: $('input[name="prefix"]').val()
      }, function(data) {
        $("#user_input").text(data.user_input);
        $("#article_title").text(data.article_title);
        $("#article_content").text(data.article_content);
        $("#ai_response").text(data.ai_response);
      });
      return false;
    });
  });
</script>

<h2>Stock Sentiment App v1.0</h2>
<p><input type="text" size="45" name="prefix"></p>
<p><button type="submit" id="download">Send URL to AI</button></p>
<p>Your input: <span id="user_input"></span></p>
<p>Article Title: <span id="article_title"></span></p>
<p>Article Content: <span id="article_content"></span></p>
<p>AI Response: <span id="ai_response"></span></p>

    <h2 class="mt-5">Stock Predictions</h2>
<div id="stock-table"></div>

</center>
</body>
</html>
